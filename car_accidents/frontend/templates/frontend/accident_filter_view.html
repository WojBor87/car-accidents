{% extends 'frontend/base.html' %} {% load crispy_forms_tags %} {% load widget_tweaks %} {% block content %}
<form method="get">
  <div class="well" style="margin: 2%">
    <h4 style="margin-top: 0">Filter accidents:</h4>
    <div class="row">
      <div class="form-group col-sm-4 col-md-3">
        <h5>Date filters:</h5>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.data_time.label_tag }} {% render_field filter.form.data_time class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.data_time__gte.label_tag }} {% render_field filter.form.data_time__gte class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.data_time__lte.label_tag }} {% render_field filter.form.data_time__lte class="form-control" %}
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-4 col-md-2">
        <h5>Location filters:</h5>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.town_name.label_tag }} {% render_field filter.form.town_name class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.road.label_tag }} {% render_field filter.form.road class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.road_geometry.label_tag }} {% render_field filter.form.road_geometry class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.place_of_the_event.label_tag }} {% render_field filter.form.place_of_the_event class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.is_built_up_area.label_tag }} {% render_field filter.form.is_built_up_area class="form-control" %}
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-4 col-md-2">
        <h5>Behavior filters:</h5>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.driver_behavior.label_tag }} {% render_field filter.form.driver_behavior class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.pedestrian_behavior.label_tag }} {% render_field filter.form.pedestrian_behavior class="form-control" %}
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-4 col-md-2">
        <h5>Environments filters:</h5>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.lighting.label_tag }} {% render_field filter.form.lighting class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.weather_conditions.label_tag }} {% render_field filter.form.weather_conditions class="form-control" %}
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-4 col-md-2">
        <h5>Other filters:</h5>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.type_of_accident.label_tag }} {% render_field filter.form.type_of_accident class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.type_of_injury.label_tag }} {% render_field filter.form.type_of_injury class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.num_of_accidents.label_tag }} {% render_field filter.form.num_of_accidents class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.num_of_fatalities.label_tag }} {% render_field filter.form.num_of_fatalities class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.num_of_injured.label_tag }} {% render_field filter.form.num_of_injured class="form-control" %}
      </div>
      <div class="form-group col-sm-4 col-md-2">
        {{ filter.form.is_offender_intoxicated.label_tag }} {% render_field filter.form.is_offender_intoxicated class="form-control" %}
      </div>
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
    <button type="reset" class="btn btn-primary">Clear</button>
  </div>
</form>

<table class="table table-bordered" style="font-size: 0.8em">
  <thead>
    <tr align="center">
      <th>IDKSIP</th>
      <th width="100em" >Date</th>
      <th>Town</th>
      <th>Road</th>
      <th>Road geometry</th>
      <th>Place of the event</th>
      <th width="80em" >is built-up area?</th>
      <th>Driver behavior</th>
      <th>Pedestrian behavior</th>
      <th>Lighting</th>
      <th>Weather conditions</th>
      <th>Type of accident</th>
      <th>Type of injury</th>
      <th>Number of accidents</th>
      <th>Number of fatalities</th>
      <th>Number of injured</th>
      <th>is offender intoxicated?</th>
    </tr>
  </thead>
  <tbody>
    {% for accident in filter.qs %}
    <tr>
      <td align="center">{{ accident.idksip }}</td>
      <td align="center">{{ accident.data_time.date }}<br />{{ accident.data_time.time }}</td>
      <td align="center">{{ accident.town_name }}</td>
      <td align="center">{{ accident.road }}</td>
      <td align="center">{{ accident.road_geometry }}</td>
      <td align="center">{{ accident.place_of_the_event }}</td>
      <td align="center">{{ accident.is_built_up_area }}</td>
      <td align="center">{{ accident.driver_behavior }}</td>
      <td align="center">{{ accident.pedestrian_behavior }}</td>
      <td align="center">{{ accident.lighting }}</td>
      <td align="center">{{ accident.weather_conditions }}</td>
      <td align="center">{{ accident.type_of_accident }}</td>
      <td align="center">{{ accident.type_of_injury }}</td>
      <td align="center">{{ accident.num_of_accidents }}</td>
      <td align="center">{{ accident.num_of_fatalities }}</td>
      <td align="center">{{ accident.num_of_injured }}</td>
      <td align="center">{{ accident.is_offender_intoxicated }}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5">No data</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock content %}
